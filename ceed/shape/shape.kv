#:import knspace kivy.uix.behaviors.knspace.knspace

<CeedPainter>:
    size_hint: None, None
    size: self.parent.size if self.parent else self.size


<PaintBar@BoxLayout>:
    spacing: '9dp'
    size_hint: None, None
    size: self.minimum_width, '45dp'
    ToggleButton:
        group: 'paint'
        text: 'Circle'
        size_hint_x: None
        padding_x: '5dp'
        width: self.texture_size[0]
        allow_no_selection: select.state == 'down'
        on_state: knspace.painter.draw_mode = 'circle' if self.state == 'down' else 'none'
    ToggleButton:
        group: 'paint'
        text: 'Ellipse'
        size_hint_x: None
        padding_x: '5dp'
        width: self.texture_size[0]
        allow_no_selection: select.state == 'down'
        on_state: knspace.painter.draw_mode = 'ellipse' if self.state == 'down' else 'none'
    ToggleButton:
        group: 'paint'
        text: 'Free'
        size_hint_x: None
        padding_x: '5dp'
        width: self.texture_size[0]
        state: 'down'
        allow_no_selection: select.state == 'down'
        on_state: knspace.painter.draw_mode = 'freeform' if self.state == 'down' else 'none'
    ToggleButton:
        group: 'paint'
        text: 'Poly'
        size_hint_x: None
        padding_x: '5dp'
        width: self.texture_size[0]
        allow_no_selection: select.state == 'down'
        on_state: knspace.painter.draw_mode = 'polygon' if self.state == 'down' else 'none'
    ToggleButton:
        group: 'paint'
        text: 'Bezier'
        size_hint_x: None
        padding_x: '5dp'
        width: self.texture_size[0]
        allow_no_selection: select.state == 'down'
        on_state: knspace.painter.draw_mode = 'bezier' if self.state == 'down' else 'none'
    ToggleButton:
        id: select
        text: 'Select'
        size_hint_x: None
        padding_x: '5dp'
        width: self.texture_size[0]
        on_state: knspace.painter.select = self.state == 'down'
    ToggleButton:
        text: 'Lock'
        size_hint_x: None
        padding_x: '5dp'
        width: self.texture_size[0]
        on_state: knspace.painter.locked = self.state == 'down'
    ToggleButton:
        text: 'Add'
        size_hint_x: None
        padding_x: '5dp'
        width: self.texture_size[0]
        state: 'down'
        on_state: knspace.painter.add_selection = self.state == 'down'
    Button:
        text: 'Copy'
        size_hint_x: None
        padding_x: '5dp'
        width: self.texture_size[0]
        on_release: knspace.painter.duplicate_selected_shapes()
    Button:
        text: 'Del'
        size_hint_x: None
        padding_x: '5dp'
        width: self.texture_size[0]
        on_release: knspace.painter.delete_shapes()
